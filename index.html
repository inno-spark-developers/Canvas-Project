<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas Project</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
</head>

<style>
    .cloud{
        background: rgb(0,0,0);
        background: linear-gradient(0deg, rgba(0,0,0,1) 0%, rgba(3,3,3,0) 63%, rgba(103,44,128,0) 83%, rgba(241,249,251,0) 100%);
    }
</style>

<body class="">
    
    <div class=" w-full -z-10 absolute top-0 left-0 bg-zinc-900">
        <div class=" parent relative top-0 left-0 w-full h-[700vh]">
            <div class="w-full h-screen sticky top-0 left-0">
                <canvas id="frame" class="w-full h-screen "></canvas>
            </div>
        </div>
    </div>

    <nav class="flex justify-between py-4 sticky top-5 items-center w-2/3 mx-auto bg-black text-white px-10 rounded-lg">
        <h1 class="text-2xl font-bold">LOGO HERE</h1>
        <div class="flex gap-3 text-md items-center">
            <h1>HOME</h1>
            <h1>CONTACT</h1>
            <h1>ABOUT</h1>
        </div>
    </nav>

    <main class="text-black z-20 relative overflow-x-hidden">
        <section class="h-screen relative">
            <h4 class="absolute -translate-x-[50%] -translate-x-[50%] top-2/3 left-1/2 bg-zinc-700/50 px-9 py-3 text-zinc-300 rounded-full flex gap-3">Scroll down <span>â†¡</span> </h4>
        </section>
        <section class="h-screen relative">
        </section>
        <section class="h-screen flex items-center w-full justify-start">
            <h1 class="text-5xl ml-32 font-bold text-black text-start">Welcome ! <br><span class="text-green-600"> To the world of </span><br>fantasy!</h1>
        </section>
        <section class="h-screen flex items-center w-full justify-end">
            <h1 class="text-5xl mr-32 font-bold text-black text-start">Here ! <br><span class="text-green-600"> Ideas gets new </span><br>Life!</h1>
        </section>
        <section class="h-[280vh] cloud"></section>

        <section class="box-shadow flex items-center justify-around gap-5 w-full h-screen bg-black">
            <div>
                <div class="relative flex w-80 flex-col rounded-xl bg-zinc-900 border-1 bg-clip-border text-gray-200 shadow-md shadow-zinc-700">
                    <div class="relative mx-4 -mt-6 h-40 overflow-hidden rounded-xl bg-blue-gray-500 bg-clip-border text-white shadow-lg shadow-blue-gray-500/40 bg-gradient-to-b from-zinc-900 to-zinc-800">
                    </div>
                <div class="p-6">
                    <h5 class="mb-2 block font-sans text-xl font-semibold leading-snug tracking-normal text-blue-gray-900 antialiased">
                    Tailwind card
                    </h5>
                    <p class="block font-sans text-base font-light leading-relaxed text-inherit antialiased">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc felis ligula. 
                    </p>
                </div>
                    <div class="p-6 pt-0">
                        <button data-ripple-light="true" type="button" class="select-none rounded-lg bg-gray-700 py-3 px-6 text-center align-middle font-sans text-xs font-bold uppercase text-white shadow-md shadow-blue-500/20 transition-all hover:shadow-lg hover:shadow-blue-500/40 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none">
                            Read More
                        </button>
                    </div>
                </div>
            </div>
            <div>
                <div class="relative flex w-80 flex-col rounded-xl bg-zinc-900 border-1 bg-clip-border text-gray-200 shadow-md shadow-zinc-700">
                    <div class="relative mx-4 -mt-6 h-40 overflow-hidden rounded-xl bg-blue-gray-500 bg-clip-border text-white shadow-lg shadow-blue-gray-500/40 bg-gradient-to-b from-zinc-900 to-zinc-800">
                    </div>
                <div class="p-6">
                    <h5 class="mb-2 block font-sans text-xl font-semibold leading-snug tracking-normal text-blue-gray-900 antialiased">
                    Tailwind card
                    </h5>
                    <p class="block font-sans text-base font-light leading-relaxed text-inherit antialiased">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc felis ligula. 
                    </p>
                </div>
                    <div class="p-6 pt-0">
                        <button data-ripple-light="true" type="button" class="select-none rounded-lg bg-gray-700 py-3 px-6 text-center align-middle font-sans text-xs font-bold uppercase text-white shadow-md shadow-blue-500/20 transition-all hover:shadow-lg hover:shadow-blue-500/40 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none">
                            Read More
                        </button>
                    </div>
                </div>
            </div>
            <div>
                <div class="relative flex w-80 flex-col rounded-xl bg-zinc-900 border-1 bg-clip-border text-gray-200 shadow-md shadow-zinc-700">
                    <div class="relative mx-4 -mt-6 h-40 overflow-hidden rounded-xl bg-blue-gray-500 bg-clip-border text-white shadow-lg shadow-blue-gray-500/40 bg-gradient-to-b from-zinc-900 to-zinc-800">
                    </div>
                <div class="p-6">
                    <h5 class="mb-2 block font-sans text-xl font-semibold leading-snug tracking-normal text-blue-gray-900 antialiased">
                    Tailwind card
                    </h5>
                    <p class="block font-sans text-base font-light leading-relaxed text-inherit antialiased">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc felis ligula. 
                    </p>
                </div>
                    <div class="p-6 pt-0">
                        <button data-ripple-light="true" type="button" class="select-none rounded-lg bg-gray-700 py-3 px-6 text-center align-middle font-sans text-xs font-bold uppercase text-white shadow-md shadow-blue-500/20 transition-all hover:shadow-lg hover:shadow-blue-500/40 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none">
                            Read More
                        </button>
                    </div>
                </div>
            </div>
        </section>
        <section class="flex bg-zinc-800 text-zinc-300 flex-col">
            <h1 class="text-4xl font-bold text-center py-10">Contact US</h1>
            
            <form>
                <div class="mt-4 flex flex-col bg-zinc-900 rounded-lg py-20 text-zinc-300 px-72">
                    <h2 class=" font-bold text-2xl">AI Story Maker Dream Form</h2>

                    <div class="mt-4">
                        <label class="font-semibold text-lg" for="title">Title</label>
                        <input placeholder="Enter a title for your dream" class="w-full bg-transparent rounded-md border-zinc-600 border  px-2 py-1" type="text">
                    </div>

                    <div class="mt-4">
                        <label class="font-semibold text-lg" for="description">Description</label>
                        <textarea placeholder="Describe your dream in detail" class="w-full resize-none bg-transparent rounded-md border-zinc-600 border  px-2 py-1" id="description"></textarea>
                    </div>

                    <div class="mt-4 flex flex-row space-x-2">
                        <div class="flex-1">
                        <label class="font-semibold text-lg" for="emotions">Emotions</label>
                        <input placeholder="What emotions did you feel during your dream?" class=" w-full bg-transparent rounded-md border-zinc-600 border  px-2 py-1" id="emotions" type="text">
                        </div>

                        <div class="flex-1">
                        <label class="font-semibold text-lg" for="symbols">Symbols</label>
                        <input placeholder="Did you see any symbols in your dream?" class="w-full bg-transparent rounded-md border-zinc-600 border  px-2 py-1" id="symbols" type="text">
                        </div>
                    </div>

                    <div class="mt-4 flex flex-row space-x-2">
                        <div class="flex-1">
                        <label class="font-semibold text-lg" for="themes">Themes</label>
                        <input placeholder="What themes do you think your dream might be about?" class="w-full bg-transparent rounded-md border-zinc-600 border  px-2 py-1" id="themes" type="text">
                        </div>
                    </div>

                    <div class="mt-4 flex justify-end">
                        <button class="bg-zinc-700  rounded-md px-4 py-1 hover:bg-teal-600 hover:" id="generate-button" type="button">Generate</button>
                    </div>

                    <div class="mt-4">
                        <textarea placeholder="Your AI-generated story will appear here" class="resize-none w-full bg-transparent rounded-md border-zinc-600 border  px-2 py-1 h-48" id="story-output"></textarea>
                    </div>
                </div>
            </form>
        </section>
    </main>




    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js" integrity="sha512-onMTRKJBKz8M1TnqqDuGBlowlH0ohFzMXYRNebz+yOcc5TQr/zAKsthzhuv0hiyUKEiQEQXEynnXCvNTOk50dg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script>

        const canvas = document.querySelector("canvas")
        const context = canvas.getContext("2d")

        const frames = {
            currentIndex: 21,
            maxIndex: 382,
        }

        let imageLoaded = 0;

        let images = [];

        function preLoadImages(){
            for(var i = 1; i <= frames.maxIndex; i++){
                const imageUrl = `./frames/frame_${i.toString().padStart(4, "0")}.jpeg`;
                
                const img = new Image
                img.src = imageUrl;

                img.onload = () => {
                    imageLoaded++;

                    if(imageLoaded === frames.maxIndex){
                        loadImage(frames.currentIndex)
                        startAnimation()
                    }
                }
                images.push(img);
            }
        }

        function loadImage(index){
            if(index >= 0 && index <= frames.maxIndex){
                const img = images[index];

                canvas.width = window.innerWidth
                canvas.height = window.innerHeight

                const scaleX = canvas.width / img.width;
                const scaleY = canvas.height / img.height;

                const scale = Math.max(scaleX, scaleY)

                const newWidth = img.width * scale;
                const newHeight = img.height * scale;

                const offSetX = (canvas.width - newWidth) / 2;
                const offSetY = (canvas.height - newHeight) / 2;

                context.clearRect(0, 0, canvas.width, canvas.height)
                context.imageSmoothingQuality = "high";
                context.imageSmoothingEnabled = true
                context.drawImage(img, offSetX, offSetY, newWidth, newHeight)

                frames.currentIndex = index
            }
        }

        function startAnimation(){
            var tl = gsap.timeline({
                scrollTrigger : {
                    trigger: ".parent",
                    start : "top top",
                    scrub: 2,
                    end: "bottom bottom"
                }
            })

            tl.to(frames, {
                currentIndex: frames.maxIndex,
                onUpdate: function(){
                    loadImage(Math.floor(frames.currentIndex))
                }
            })
        }

        preLoadImages()


    </script>

</body>
</html>